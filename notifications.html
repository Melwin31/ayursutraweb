<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Notifications — AyurSutra</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* page-specific */
    .page-title { margin: 4px 0 14px; }
    .tabs { display:flex; gap:12px; align-items:center; margin-bottom:14px; }
    .tab { padding:10px 18px; border-radius:30px; background:var(--accent); color: #6b6b6b; font-weight:700; cursor:pointer; }
    .tab.inactive { background:#fff; border:1px solid #f0efe9; color: #6b6b6b; }
    .controls { display:flex; gap:10px; align-items:center; margin-bottom:18px; }
    .select { padding:10px 12px; border-radius:10px; border:1px solid #eee; background:#fff; cursor:pointer; }
    .btn-mark { padding:10px 14px; border-radius:10px; border:1px solid #eee; background:#fff; font-weight:700; cursor:pointer; }

    /* notification card */
    .notification-card {
      background:var(--panel);
      border-radius:14px;
      padding:18px;
      box-shadow:var(--shadow);
      margin-bottom:16px;
      display:flex;
      flex-direction:column;
      gap:8px;
      border:1px solid rgba(0,0,0,0.03);
    }
    .notification-top { display:flex;justify-content:space-between;align-items:center;gap:12px }
    .notif-title { font-weight:800; font-size:15px; color:#233229 }
    .badge-tag { padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px; background:#e9f0ff; color:#4169e1; }
    .badge-tag.alert { background:#fff3e8; color:#a76d00; }
    .badge-tag.feedback { background:#eaf9f1; color:#1f8a4a }
    .badge-dot { width:10px;height:10px;border-radius:999px;background:#2f7a5e;margin-left:8px }
    .notif-desc { color:var(--muted); font-size:14px; }
    .notif-meta { display:flex; gap:12px; color:var(--muted); font-size:13px; align-items:center }
    .meta-item { display:flex; gap:6px; align-items:center }

    /* small icon */
    .icon { width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center;border-radius:4px; }

    /* small layout tweak for the tab area */
    .tab-row { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px }
    .filters-row { display:flex; gap:10px; align-items:center; margin-top:6px }
  </style>
</head>
<body>
  <div class="container">
    <!-- sidebar (consistent markup) -->
    <aside class="sidebar" aria-label="Main sidebar">
      <div class="brand">
        <div class="logo">AS</div>
        <div>
          <h3>AyurSutra</h3>
          <div style="font-size:13px;color:var(--muted)">Panchakarma Clinic</div>
        </div>
      </div>
      <nav class="side-nav" aria-label="Primary">
        <a href="doctor-dashboard.html">Dashboard</a>
        <a href="patient-dashboard.html">Patients</a>
        <a href="sessions.html">Sessions</a>
        <a href="protocols.html">Therapy Protocols</a>
        <a class="active" href="notifications.html">Notifications</a>
        <a href="analytics.html">Analytics</a>
        <a href="settings.html">Settings</a>
      </nav>
      <div class="profile">
        <div class="mini">DA</div>
        <div>
          <div style="font-weight:800">Dr. Sharma</div>
          <div style="font-size:13px;color:var(--muted)">Vaidya</div>
        </div>
      </div>
    </aside>

    <!-- main -->
    <main class="main" role="main">
      <div class="topbar">
        <div class="greeting">
          <h1>Good morning, Dr. Sharma</h1>
          <p class="muted">Welcome to your Practitioner dashboard</p>
        </div>
        <div style="display:flex;gap:12px;align-items:center">
          <button class="btn-outline" title="Notifications">🔔</button>
          <div style="padding:6px 12px;border-radius:10px;background:var(--panel);box-shadow:var(--shadow);font-weight:700">Dr. Sharma ▾</div>
        </div>
      </div>

      <h2 class="page-title">Notifications Center</h2>
      <p class="muted" style="margin-top:0;margin-bottom:12px">Manage notifications and communication templates</p>

      <div class="tab-row">
        <div class="tabs">
          <div class="tab">Notifications</div>
          <div class="tab inactive">Templates</div>
        </div>

        <div style="display:flex;align-items:center;gap:10px">
          <button class="btn-mark" id="markAllBtn">Mark All as Read</button>
        </div>
      </div>

      <div class="controls">
        <div class="filters-row">
          <select id="channelFilter" class="select" aria-label="Filter channel">
            <option value="all">All Channels</option>
            <option value="inapp">In-App</option>
            <option value="email">Email</option>
            <option value="sms">Sms</option>
          </select>

          <select id="statusFilter" class="select" aria-label="Filter status">
            <option value="all">All Status</option>
            <option value="unread">Unread</option>
            <option value="read">Read</option>
          </select>
        </div>
      </div>

      <!-- notifications list -->
      <section id="notificationsList" aria-live="polite">
        <!-- populated by JS -->
      </section>
    </main>

    <!-- right column -->
    <aside class="right" aria-hidden>
      <div class="quick-actions">
        <button onclick="alert('Compose (demo)')">Compose Notification</button>
      </div>
      <div class="notifications" style="margin-top:14px">
        <h4 style="margin:0 0 8px 0">Quick Tips</h4>
        <div style="color:var(--muted)">Use templates to speed up reminders and post-procedure instructions.</div>
      </div>
    </aside>
  </div>

  <script>
    // sample notifications data
    const notifications = [
      { id:1, type:'reminder', title:'Pre-procedure reminder', text:'Rahul Patel has Abhyanga session in 30 minutes', time:'5 min ago', channel:'inapp', unread:true },
      { id:2, type:'feedback', title:'Session feedback received', text:'Priya Singh rated her Shirodhara session 5 stars', time:'1 hour ago', channel:'inapp', unread:false },
      { id:3, type:'alert', title:'Patient registration', text:'New patient Krishna Iyer has registered for consultation', time:'2 hours ago', channel:'email', unread:true },
      { id:4, type:'reminder', title:'Post-procedure instructions', text:'Send post-Panchakarma care instructions to Amit Sharma', time:'3 hours ago', channel:'sms', unread:false },
      { id:5, type:'system', title:'System maintenance', text:'Scheduled maintenance on Sunday 2 AM - 4 AM', time:'1 day ago', channel:'inapp', unread:false },
    ];

    const listEl = document.getElementById('notificationsList');

    function badgeForType(type){
      switch(type){
        case 'reminder': return '<span class="badge-tag">reminder</span>';
        case 'feedback': return '<span class="badge-tag feedback">feedback</span>';
        case 'alert': return '<span class="badge-tag alert">alert</span>';
        case 'system': return '<span class="badge-tag" style="background:#f3eaff;color:#6d3bb8">system</span>';
        default: return '<span class="badge-tag">note</span>';
      }
    }

    function channelIcon(channel){
      if(channel === 'inapp') return '🔔';
      if(channel === 'email') return '✉️';
      if(channel === 'sms') return '📞';
      return '🔔';
    }

    function renderNotifications(filterChannel='all', filterStatus='all'){
      listEl.innerHTML = '';
      const filtered = notifications.filter(n=>{
        if(filterChannel !== 'all' && n.channel !== filterChannel) return false;
        if(filterStatus === 'unread' && !n.unread) return false;
        if(filterStatus === 'read' && n.unread) return false;
        return true;
      });

      filtered.forEach(n=>{
        const card = document.createElement('article');
        card.className = 'notification-card';
        card.innerHTML = `
          <div class="notification-top">
            <div style="display:flex;align-items:center;gap:12px">
              <div style="font-size:18px;color:var(--primary)">🔔</div>
              <div>
                <div class="notif-title">${n.title} ${badgeForType(n.type)}</div>
                <div class="notif-desc">${n.text}</div>
              </div>
            </div>

            <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px">
              <div style="display:flex;align-items:center;gap:8px">
                ${n.unread ? '<div title="unread" style="width:10px;height:10px;border-radius:999px;background:#2f7a5e;"></div>' : ''}
                <div style="color:var(--muted);font-size:13px">${n.time}</div>
              </div>
              <div class="notif-meta">
                <div class="meta-item"><span class="icon">${channelIcon(n.channel)}</span><span style="color:var(--muted);font-size:13px">${n.channel === 'inapp' ? 'In-App' : n.channel === 'email' ? 'Email' : 'Sms'}</span></div>
                <button class="btn-outline" onclick="toggleRead(${n.id})">${n.unread ? 'Mark read' : 'Mark unread'}</button>
              </div>
            </div>
          </div>
        `;
        listEl.appendChild(card);
      });

      if(filtered.length === 0){
        const empty = document.createElement('div');
        empty.style.color = 'var(--muted)';
        empty.style.padding = '20px';
        empty.textContent = 'No notifications found for selected filters.';
        listEl.appendChild(empty);
      }
    }

    // initial render
    renderNotifications();

    // filter handlers
    document.getElementById('channelFilter').addEventListener('change', (e)=>{
      renderNotifications(e.target.value, document.getElementById('statusFilter').value);
    });
    document.getElementById('statusFilter').addEventListener('change', (e)=>{
      renderNotifications(document.getElementById('channelFilter').value, e.target.value);
    });

    // mark all read
    document.getElementById('markAllBtn').addEventListener('click', ()=>{
      notifications.forEach(n=> n.unread = false);
      renderNotifications(document.getElementById('channelFilter').value, document.getElementById('statusFilter').value);
      alert('All notifications marked as read (demo)');
    });

    // toggle single read/unread
    function toggleRead(id){
      const n = notifications.find(x => x.id === id);
      if(!n) return;
      n.unread = !n.unread;
      renderNotifications(document.getElementById('channelFilter').value, document.getElementById('statusFilter').value);
    }

    // expose toggleRead for buttons in HTML
    window.toggleRead = toggleRead;
  </script>
</body>
</html>
